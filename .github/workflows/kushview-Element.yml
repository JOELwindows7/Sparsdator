name: Sparsdat kushview's Elements the comprehensive JUCE VST host
# https://github.com/kushview/Element
# Maintainer: Admiral Zumi, Lebuz Slappafali, JOELwindows7
# Reason: The Binary file is paywalled & is subscription. 
# Descriptions: see https://kushview.net/element/download/ then `Prebuilt Intaller`.
# You can see in https://kushview.net/element/download/form/ , the buy only grants you 1 version 
# & download link only lasts 14 days after buy. to always have latest version, you must subscribe to some sort of
# Patreon. This is indeed adobe level of soul sucking.
# Instruction sauce from https://github.com/kushview/Element/blob/master/docs/building.md

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  
  # Make every manufacturing belts runs this type of workflow every single month on day one
  schedule:
  - cron: "0 0 1 * *"

env:
  UPDATE: ~/work/Sparsdator/Sparsdator/ShellScripts/setup_and_update.sh

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # (IMPORTANT) Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      # (IMPORTANT) Prepare SparsdatField Folder!
      - name: Prepare Manufacturing Tray
        run: |
          mkdir -p ~/SparsdatField
          pwd ~
          ls ~
      
      # (IMPORTANT) Update Everything & setup another stuffs matter
      - name: Update everything pls! Setup Essentials too!
        run: |
          ls
          pwd
          chmod +x ~/work/Sparsdator/Sparsdator/ShellScripts/setup_and_update.sh
          ~/work/Sparsdator/Sparsdator/ShellScripts/setup_and_update.sh
      
      - name: Clone Kushview Element's source code
        run: |
          cd ~/SparsdatField
          pwd
          git clone --recurse-submodules https://github.com/kushview/Element.git
          ls
      
      - name: Waf Script configure & build Element
        run: |
          cd ~/SparsdatField/Element
          ls
          pwd
          ./waf configure
          ./waf build
          ./waf check
      
      - name: Watermark our name
        run: |
          cp ~/work/PressKit/X0P1R4T3_eenvreensment.md ~/SparsdatField/Element/build
          cp ~/work/PressKit/X0P1R4T3_eenvreensment.txt ~/SparsdatField/Element/build
      
      - name: Artifact element
        uses: actions/upload-artifact@v2.3.1
        with:
          # Artifact name
          name: KUSHVIEW-ELEMENT-DIRTY_REPACK-FULLVERSION-FREE-NO_VIRUS-NO_PASSWORD
          # A file, directory or wildcard pattern that describes what to upload
          path: ~/SparsdatField/Element/build